<h1>PROFILE</h1>
  
  <%= image_tag @user.profile_picture %>
  <br>
  <%= @user.first_name %>
  <br>
  <% if @user == current_user %>
    <%= link_to 'Edit my info', edit_registration_path(@user) %>
    <%= render 'friend_requests/pending_friend_requests' %>
  <% else %>
    <% if Friendship.exists?(user_a_id: current_user.id, user_b_id: @user.id) || Friendship.exists?(user_a_id: @user.id, user_b_id: current_user.id) %>
      <p>You and <%=@user.first_name%> are already friends!</p>
      <p><%= button_to 'Un Friend!', friendship_path, method: :delete %></p>
    <% elsif FriendRequest.exists?(requestor_id: current_user.id, receiver_id: @user.id) || FriendRequest.exists?(requestor_id: @user.id, receiver_id: current_user.id) %>
      <p> There is already a pending friendship request between the two of you, one of you needs to sort it.... </p>
    <% else %>
      <%= button_to 'Add friend', friend_requests_path, method: :post, params: { receiver_id: @user.id } %>
    <% end %>
  <% end %>

<div>
  <p>Here are all of <%=@user.first_name%>'s posts</p><br>
  <table>
  <thead>
    <tr>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @user.posts.each do |post| %>
      <tr>
        
        <td><%= post.body %></td>
      </tr>
    <% end %>
  </tbody>
  </table>
</div>
<h2>Friends</h2>